{"id":"tdd-claude-dev-container-2dc","title":"Contracts: Shared types defined","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-03T00:54:09.238414988-08:00","created_by":"mattc","updated_at":"2026-01-03T00:54:18.704896659-08:00","closed_at":"2026-01-03T00:54:18.704896659-08:00","close_reason":"Contracts frozen and validated","labels":["contracts-frozen"]}
{"id":"tdd-claude-dev-container-3ye","title":"Review: CORS wildcard allow_origins insecure for production","description":"main.py uses allow_origins=['*'] in CORS middleware. This allows any origin to make requests, which is insecure for production deployments.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-03T02:41:28.300444599-08:00","created_by":"mattc","updated_at":"2026-01-03T02:41:28.300444599-08:00","comments":[{"id":15,"issue_id":"tdd-claude-dev-container-3ye","author":"mattc","text":"Found in main.py:43-48: CORSMiddleware uses allow_origins=['*'] which permits any domain to make requests. For production, should use explicit list of allowed origins from environment variable (e.g., settings.allowed_origins).","created_at":"2026-01-03T10:41:55Z"}]}
{"id":"tdd-claude-dev-container-3zm","title":"Review: Terminal.svelte status CSS class missing for exited/error","description":"Terminal.svelte uses status classes (running, exited, error) but has no CSS defined for the status indicator element within the component - relying on global styles only","status":"open","priority":4,"issue_type":"bug","created_at":"2026-01-03T02:41:35.242102572-08:00","created_by":"mattc","updated_at":"2026-01-03T02:41:35.242102572-08:00"}
{"id":"tdd-claude-dev-container-640","title":"Review: Missing Makefile","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T02:42:06.558112656-08:00","created_by":"mattc","updated_at":"2026-01-03T02:42:06.558112656-08:00","comments":[{"id":24,"issue_id":"tdd-claude-dev-container-640","author":"mattc","text":"Infrastructure review: Makefile not found. Need Makefile with: help target, .PHONY declarations, common development commands.","created_at":"2026-01-03T10:42:22Z"}]}
{"id":"tdd-claude-dev-container-7cn","title":"Review: Frontend Project type missing backend fields","description":"Frontend api.ts Project interface is missing fields from backend: description, github_url, local_path, updated_at. Also uses 'path' instead of 'local_path', and 'id: string' instead of 'id: number'.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-03T02:41:28.71281494-08:00","created_by":"mattc","updated_at":"2026-01-03T02:41:28.71281494-08:00","comments":[{"id":11,"issue_id":"tdd-claude-dev-container-7cn","author":"mattc","text":"Contract comparison:\n\nBACKEND (project.py):\n- id: int\n- name: str\n- description: Optional[str]\n- github_url: Optional[str]\n- local_path: Optional[str]\n- container_id: Optional[str]\n- created_at: datetime\n- updated_at: datetime\n\nFRONTEND (api.ts):\n- id: string (MISMATCH: should be number)\n- name: string\n- path: string (MISMATCH: should be local_path and optional)\n- created_at: string\n- container_id?: string\n\nMISSING in frontend:\n- description\n- github_url\n- updated_at","created_at":"2026-01-03T10:41:44Z"}]}
{"id":"tdd-claude-dev-container-96o","title":"Review: verify-environment.sh has unquoted variable","status":"open","priority":3,"issue_type":"bug","created_at":"2026-01-03T02:41:47.816396255-08:00","created_by":"mattc","updated_at":"2026-01-03T02:41:47.816396255-08:00","comments":[{"id":16,"issue_id":"tdd-claude-dev-container-96o","author":"mattc","text":"Found in scripts/verify-environment.sh:56: Variable $ERRORS is unquoted in comparison. Should be \"[ \"$ERRORS\" -eq 0 ]\" instead of \"[ $ERRORS -eq 0 ]\" for robustness.","created_at":"2026-01-03T10:41:55Z"}]}
{"id":"tdd-claude-dev-container-a7d","title":"Review: Command injection risk - arbitrary command execution via WebSocket","description":"The spawn_process method in cli_runner.py accepts arbitrary command lists from WebSocket clients and executes them via os.execvpe(). Any connected WebSocket client can execute arbitrary commands on the host.","status":"open","priority":0,"issue_type":"bug","created_at":"2026-01-03T02:41:25.978050257-08:00","created_by":"mattc","updated_at":"2026-01-03T02:41:25.978050257-08:00","comments":[{"id":12,"issue_id":"tdd-claude-dev-container-a7d","author":"mattc","text":"Found in cli_runner.py:84-90: The pty.fork() followed by os.execvpe(command[0], command, process_env) executes any command array passed in. The WebSocket terminal.py:78-104 passes this command directly from client JSON without validation. Any WebSocket client can run commands like ['rm', '-rf', '/'] or ['cat', '/etc/passwd'].","created_at":"2026-01-03T10:41:50Z"}]}
{"id":"tdd-claude-dev-container-a8n","title":"Fixtures: Test infrastructure ready","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-03T01:09:24.294873306-08:00","created_by":"mattc","updated_at":"2026-01-03T01:09:32.746269288-08:00","closed_at":"2026-01-03T01:09:32.746269288-08:00","close_reason":"Test infrastructure created: conftest.py, fixtures, mock-claude.sh, frontend mocks","labels":["fixtures-ready","reviewed"],"comments":[{"id":25,"issue_id":"tdd-claude-dev-container-a8n","author":"mattc","text":"## Infrastructure Review Complete\n\n### Summary\n- Files reviewed: 4 (mock-claude.sh, setup-worktrees.sh, verify-environment.sh, .env.example)\n- Issues found: 6\n- Critical (P0-P1): 0\n- Medium (P2): 4 (missing infrastructure components)\n- Low (P3): 2 (script quality issues)\n\n### Findings\n\n**Existing Files (GOOD):**\n1. mock-claude.sh - Well-structured, has set -euo pipefail, SIGINT handled, no injection vulnerabilities, all commands work\n2. .env.example - Properly documented, no secrets committed\n\n**Script Quality Issues (P3):**\n1. setup-worktrees.sh:32 - Unquoted variable $dir\n2. verify-environment.sh:56 - Unquoted variable $ERRORS\n\n**Missing Infrastructure (P2):**\n1. No Dockerfile (need non-root, pinned images)\n2. No docker-compose.yml (need health checks, resource limits)\n3. No GitHub Actions workflows (need pinned SHAs, minimal permissions)\n4. No Makefile (need help target, .PHONY declarations)\n\n### Issues Created\n- tdd-claude-dev-container-fnw: Unquoted variable in setup-worktrees.sh\n- tdd-claude-dev-container-96o: Unquoted variable in verify-environment.sh\n- tdd-claude-dev-container-pib: Missing Dockerfile\n- tdd-claude-dev-container-cco: Missing docker-compose.yml\n- tdd-claude-dev-container-ow7: Missing CI/CD workflows\n- tdd-claude-dev-container-640: Missing Makefile\n\n### Recommendation\nNEEDS-FIXES: Core infrastructure (Docker, CI/CD, Makefile) is not yet implemented. The existing scripts are well-written but have minor quoting issues. The mock-claude.sh is production-ready.","created_at":"2026-01-03T10:42:45Z"}]}
{"id":"tdd-claude-dev-container-aoy","title":"Review: Frontend implementation review","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T02:41:10.516157207-08:00","created_by":"mattc","updated_at":"2026-01-03T02:42:09.214111235-08:00","closed_at":"2026-01-03T02:42:09.214111235-08:00","close_reason":"Review complete","labels":["review-complete","reviewed"],"comments":[{"id":19,"issue_id":"tdd-claude-dev-container-aoy","author":"mattc","text":"## Frontend Review Complete\n\n### Summary\n- Components reviewed: 7 (2 lib components, 5 route pages)\n- Files reviewed: 10 (including api client, websocket, types, CSS)\n- Issues found: 4\n- Critical (P0-P1): 0\n- Medium (P2): 1\n- Low (P3-P4): 3\n\n### Automated Checks\n- npm run check: Could not run (npm not available in environment)\n- npm run build: Could not run (npm not available in environment)\n- Manual code review: Complete\n\n### Positive Findings\n1. No 'any' types - All TypeScript properly typed\n2. No XSS vulnerabilities - No @html directives with user content\n3. No eval() or document.write() usage\n4. No sensitive data in localStorage\n5. All buttons use proper \u003cbutton\u003e elements, not \u003cdiv\u003e\n6. Form inputs have proper labels with for/id attributes\n7. All interactive elements have data-testid attributes\n8. Terminal.svelte has proper cleanup in onDestroy\n9. WebSocket has reconnection logic with exponential backoff\n10. Error states are handled with user-friendly messages\n11. Loading states are properly shown\n\n### Issues Found\n\n#### P2 - Contract Compliance\n- tdd-claude-dev-container-7cn: Frontend Project type diverges from backend\n  - id: string vs number\n  - path vs local_path\n  - Missing: description, github_url, updated_at\n\n#### P3 - PWA Requirements\n- tdd-claude-dev-container-gy4: PWA icons missing (icon-192.png, icon-512.png)\n- tdd-claude-dev-container-uk7: Service worker not implemented\n\n#### P4 - Code Quality\n- tdd-claude-dev-container-3zm: Minor CSS organization issue\n\n### Recommendation\nAPPROVE with minor fixes required\n\nThe frontend implementation is well-structured with proper TypeScript typing, accessibility, security practices, and error handling. The main concern is the contract mismatch with the backend (P2) which should be resolved before integration. PWA assets (P3) should be added for proper PWA functionality.","created_at":"2026-01-03T10:41:59Z"}]}
{"id":"tdd-claude-dev-container-bjk","title":"Review: Missing shared contracts.py - inline Pydantic models instead","description":"Backend defines its own Pydantic models inline in routers instead of using shared contracts from a contracts.py file. This may cause API contract drift with frontend.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-03T02:41:26.770199193-08:00","created_by":"mattc","updated_at":"2026-01-03T02:41:26.770199193-08:00","comments":[{"id":17,"issue_id":"tdd-claude-dev-container-bjk","author":"mattc","text":"Backend defines inline models: ContainerCreate, ContainerResponse, StatusResponse in containers.py:16-40 and ProjectBase, Project, ProjectCreate, ProjectUpdate, ProjectRead in project.py. These should be imported from a shared contracts.py to ensure frontend/backend type alignment.","created_at":"2026-01-03T10:41:56Z"}]}
{"id":"tdd-claude-dev-container-cco","title":"Review: Missing docker-compose.yml","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T02:42:04.822997419-08:00","created_by":"mattc","updated_at":"2026-01-03T02:42:04.822997419-08:00","comments":[{"id":22,"issue_id":"tdd-claude-dev-container-cco","author":"mattc","text":"Infrastructure review: docker-compose.yml not found. Need compose file with: health checks, resource limits, secure volume mounts.","created_at":"2026-01-03T10:42:18Z"}]}
{"id":"tdd-claude-dev-container-d6c","title":"Watchdog: FROZEN contracts.py deleted by domain agents","description":"Both backend and frontend branches deleted the frozen contracts.py file. Backend replaced it with a different project.py model. This breaks the contract between domains and may cause integration failures.","status":"open","priority":0,"issue_type":"bug","created_at":"2026-01-03T02:34:02.036057432-08:00","created_by":"mattc","updated_at":"2026-01-03T02:34:02.036057432-08:00"}
{"id":"tdd-claude-dev-container-dx7","title":"Watchdog: Monitor Phase 1 execution","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T01:16:00.916009672-08:00","created_by":"mattc","updated_at":"2026-01-03T01:54:27.120789591-08:00","closed_at":"2026-01-03T01:54:27.120789591-08:00","close_reason":"Phase 1 complete. All domain agents finished. No issues detected.","comments":[{"id":1,"issue_id":"tdd-claude-dev-container-dx7","author":"mattc","text":"Watchdog Check #1 (01:36): Backend has 13 files (pyproject.toml, tests, __init__.py files). Frontend has 4 files (package.json, configs). Infra has 4 files (Dockerfile, compose, scripts). All agents actively working - no commits yet (files untracked). No sync conflicts.","created_at":"2026-01-03T09:36:27Z"},{"id":2,"issue_id":"tdd-claude-dev-container-dx7","author":"mattc","text":"Watchdog Check #2 (01:42): INFRA COMPLETE - committed and pushed. Backend has 40 files (working on services). Frontend has 26 source files (components, routes, api). No domain violations. No sync conflicts.","created_at":"2026-01-03T09:42:22Z"},{"id":3,"issue_id":"tdd-claude-dev-container-dx7","author":"mattc","text":"Watchdog Check #3 (01:48): FRONTEND COMPLETE - committed and pushed. INFRA COMPLETE. Backend has 56 files and still working (has main, config, database, models, routers, services, websockets). Waiting on Backend commit.","created_at":"2026-01-03T09:48:09Z"},{"id":4,"issue_id":"tdd-claude-dev-container-dx7","author":"mattc","text":"PHASE 1 COMPLETE. All domain agents finished successfully. Backend: c3de2d7 pushed. Frontend: 5fe764d pushed. Infra: dcaba54 pushed. No domain violations detected. No sync conflicts. No blocked issues. Ready for review phase.","created_at":"2026-01-03T09:54:11Z"}]}
{"id":"tdd-claude-dev-container-e00","title":"Review: Path traversal risk in spawn_process cwd parameter","description":"The spawn_process method accepts a cwd parameter from WebSocket clients without validation. Malicious client could specify arbitrary directory like /etc or /root.","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-03T02:41:27.523494433-08:00","created_by":"mattc","updated_at":"2026-01-03T02:41:27.523494433-08:00","comments":[{"id":13,"issue_id":"tdd-claude-dev-container-e00","author":"mattc","text":"Found in cli_runner.py:88-89 and terminal.py:79: The cwd parameter is passed from WebSocket client to os.chdir(cwd) without path validation. A malicious client could set cwd='/etc' or cwd='/../../../root'. Should use pathlib.Path.resolve().relative_to() pattern to restrict to allowed directories.","created_at":"2026-01-03T10:41:51Z"}]}
{"id":"tdd-claude-dev-container-fnw","title":"Review: setup-worktrees.sh has unquoted variable","status":"open","priority":3,"issue_type":"bug","created_at":"2026-01-03T02:41:34.953385307-08:00","created_by":"mattc","updated_at":"2026-01-03T02:41:34.953385307-08:00","comments":[{"id":10,"issue_id":"tdd-claude-dev-container-fnw","author":"mattc","text":"Found in scripts/setup-worktrees.sh:32: Variable $dir is unquoted in the for loop. Should be \"cd \"$dir\"\" instead of \"cd $dir\" to handle paths with spaces correctly.","created_at":"2026-01-03T10:41:43Z"}]}
{"id":"tdd-claude-dev-container-gy4","title":"Review: PWA icons missing from static/","description":"manifest.json references icon-192.png and icon-512.png but these files do not exist in static/","status":"open","priority":3,"issue_type":"bug","created_at":"2026-01-03T02:41:27.147045845-08:00","created_by":"mattc","updated_at":"2026-01-03T02:41:27.147045845-08:00"}
{"id":"tdd-claude-dev-container-ius","title":"Review: Missing command allowlist validation in WebSocket terminal","description":"WebSocket terminal endpoint accepts any command array without validation. Should restrict to allowed commands or require authentication.","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-03T02:41:29.115234097-08:00","created_by":"mattc","updated_at":"2026-01-03T02:41:29.115234097-08:00","comments":[{"id":14,"issue_id":"tdd-claude-dev-container-ius","author":"mattc","text":"Found in terminal.py:76-116: The spawn message handler accepts command, cwd, and env from client without any validation. Recommendation: implement an allowlist of commands (e.g., only 'bash', 'sh', or project-specific CLIs) or require authentication tokens.","created_at":"2026-01-03T10:41:53Z"}]}
{"id":"tdd-claude-dev-container-ow7","title":"Review: Missing CI/CD GitHub Actions workflows","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T02:42:05.689693865-08:00","created_by":"mattc","updated_at":"2026-01-03T02:42:05.689693865-08:00","comments":[{"id":23,"issue_id":"tdd-claude-dev-container-ow7","author":"mattc","text":"Infrastructure review: No GitHub Actions workflows found in .github/workflows/. Need CI/CD with: actions pinned to SHA, minimal permissions, secrets not logged.","created_at":"2026-01-03T10:42:19Z"}]}
{"id":"tdd-claude-dev-container-pib","title":"Review: Missing Dockerfile for project","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T02:42:04.001743068-08:00","created_by":"mattc","updated_at":"2026-01-03T02:42:04.001743068-08:00","comments":[{"id":21,"issue_id":"tdd-claude-dev-container-pib","author":"mattc","text":"Infrastructure review: No Dockerfile found in docker/ or project root. Need Dockerfile with: non-root user, pinned base image, no secrets in build args.","created_at":"2026-01-03T10:42:16Z"}]}
{"id":"tdd-claude-dev-container-pjh","title":"Review: Ruff style issues - 20 fixable linting errors","description":"ruff check backend/app/ reports 20 style issues including: Optional -\u003e X|None modernization, unused imports, import ordering. All auto-fixable with ruff check --fix.","status":"open","priority":3,"issue_type":"bug","created_at":"2026-01-03T02:41:29.974372238-08:00","created_by":"mattc","updated_at":"2026-01-03T02:41:29.974372238-08:00","comments":[{"id":18,"issue_id":"tdd-claude-dev-container-pjh","author":"mattc","text":"Files affected: project.py (10 issues), containers.py (5 issues), database.py (1 issue), projects.py (1 issue), docker_manager.py (1 issue), terminal.py (1 issue). Run 'ruff check --fix backend/app/' to auto-fix all issues.","created_at":"2026-01-03T10:41:58Z"}]}
{"id":"tdd-claude-dev-container-t2e","title":"Review: Backend implementation review","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T02:40:55.382221352-08:00","created_by":"mattc","updated_at":"2026-01-03T02:42:26.928422101-08:00","closed_at":"2026-01-03T02:42:26.928422101-08:00","close_reason":"Review complete - 6 issues found (3 critical P0-P1)","labels":["review-complete"],"comments":[{"id":20,"issue_id":"tdd-claude-dev-container-t2e","author":"mattc","text":"## Backend Review Complete\n\n### Summary\n- Files reviewed: 9 (main.py, config.py, database.py, project.py, containers.py, projects.py, cli_runner.py, docker_manager.py, terminal.py)\n- Tests: 63 passed, 86% coverage (above 80% threshold)\n- Issues found: 6\n- Critical (P0-P1): 3\n\n### Test Coverage\n- Overall: 86% (threshold: 80%)\n- Tests are well-organized with unit and integration tests\n- WebSocket terminal tests comprehensive\n\n### Findings\n1. [P0] Command injection: WebSocket accepts arbitrary command arrays for execution\n2. [P1] Path traversal: cwd parameter not validated in spawn_process  \n3. [P1] Missing command allowlist: No restriction on executable commands\n4. [P2] Missing contracts.py: Inline Pydantic models instead of shared contracts\n5. [P2] CORS wildcard: allow_origins=['*'] insecure for production\n6. [P3] Style issues: 20 ruff linting errors (auto-fixable)\n\n### Positive Observations\n- No bare except clauses\n- Proper error handling with try/except for Docker and file I/O\n- HTTP status codes used correctly (400, 404, 500, 201, 204)\n- WebSocket cleanup on disconnect properly implemented\n- PTY process termination on disconnect handled\n- Pydantic response models used on all endpoints\n- Good type hints throughout\n\n### Recommendation\nNEEDS-FIXES: 3 critical security issues (P0-P1) must be resolved before deployment. The WebSocket terminal endpoint allows arbitrary command execution which is a severe vulnerability.","created_at":"2026-01-03T10:42:16Z"}]}
{"id":"tdd-claude-dev-container-tkk","title":"Watchdog: Monitor Phase 1 execution","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T02:31:41.415768977-08:00","created_by":"mattc","updated_at":"2026-01-03T02:35:34.829622857-08:00","closed_at":"2026-01-03T02:35:34.829622857-08:00","close_reason":"Closed","comments":[{"id":5,"issue_id":"tdd-claude-dev-container-tkk","author":"mattc","text":"Started monitoring at Sat Jan  3 02:33:03 PST 2026. Initial check: All 3 domain branches have completion commits. Backend: 1 commit, Frontend: 1 commit, Infra: 1 commit. Checking for domain violations...","created_at":"2026-01-03T10:33:03Z"},{"id":6,"issue_id":"tdd-claude-dev-container-tkk","author":"mattc","text":"ALERT: Domain violation detected. Backend branch deleted frontend files (api.ts, test fixtures) that Frontend branch modified. This will cause merge conflicts. Frontend versions should take precedence.","created_at":"2026-01-03T10:33:26Z"},{"id":7,"issue_id":"tdd-claude-dev-container-tkk","author":"mattc","text":"CRITICAL ISSUE FOUND: P0 bug tdd-claude-dev-container-d6c created. The frozen contracts.py file was deleted by both Backend and Frontend agents. This violates Phase 0 contract freeze and may cause integration failures.","created_at":"2026-01-03T10:34:09Z"},{"id":8,"issue_id":"tdd-claude-dev-container-tkk","author":"mattc","text":"Progress Report: Backend 1/1 complete, Frontend 1/1 complete, Infra 1/1 complete. All domain branches have completion commits. ISSUES: 1 P0 bug (contracts deleted), multiple domain violations detected. Ready for review phase with caveats.","created_at":"2026-01-03T10:35:01Z"},{"id":9,"issue_id":"tdd-claude-dev-container-tkk","author":"mattc","text":"Phase 1 complete. All domain agents finished. SUMMARY: Backend (1 commit, 29 files), Frontend (1 commit, 19 files), Infra (1 commit, 8 files). CRITICAL: P0 bug for deleted contracts. Ready for review with caveats - contracts must be reconciled first.","created_at":"2026-01-03T10:35:28Z"}]}
{"id":"tdd-claude-dev-container-uk7","title":"Review: Service worker missing for PWA","description":"No service-worker.ts found in src/ - required for offline PWA functionality","status":"open","priority":3,"issue_type":"bug","created_at":"2026-01-03T02:41:27.929566979-08:00","created_by":"mattc","updated_at":"2026-01-03T02:41:27.929566979-08:00"}
{"id":"tdd-claude-dev-container-vet","title":"Environment: Setup complete","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-03T00:43:27.731520057-08:00","created_by":"mattc","updated_at":"2026-01-03T00:43:54.211534496-08:00","closed_at":"2026-01-03T00:43:54.211534496-08:00","close_reason":"environment-ready","labels":["environment-ready"]}
